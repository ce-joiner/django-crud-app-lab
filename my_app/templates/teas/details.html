{% extends 'base.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/teas/tea-details.css' %}" />
{% endblock %}
{% block content %}
<section class="tea-container">
  <div class="tea-img">
    {% if tea.image %}
    {% if 'images/' in tea.image.name %}
    <!-- For old static file paths -->
    <img src="{% static tea.image %}" alt="{{ tea.name }}" />
    {% else %}
    <!-- For new uploaded files -->
    <img src="{{ tea.image.url }}" alt="{{ tea.name }}" />
    {% endif %}
    {% else %}
    <img src="{% static 'images/default-tea.png' %}" alt="{{ tea.name }}" />
    {% endif %}
  </div>
  <div class="tea-details">
    <h1>{{ tea.name }}</h1>
    <h2>{{ tea.type }} tea</h2>
    <h3>{{ tea.origin }}</h3>
    <p>{{ tea.description }}</p>

    <div class="tea-actions">
      <a href="{% url 'tea_update' tea.id %}" class="btn warn">Edit</a>
      <a href="{% url 'tea_delete' tea.id %}" class="btn danger">Delete</a>
    </div>
  </div>
</section>
<!-- Brewing Records Section -->
<div class="brewing-container">
  <section class="brewing-sessions">
    <div class="subsection-title">
  <h2>Brewing Sessions</h2>
      <img
        src="{% static 'images/brewing1.png' %}"
        alt="A tea cup"
      />
    </div>
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Temperature</th>
          <th>Steeping Time</th>
          <th>Tea Amount</th>
          <th>Water Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for brewing in tea.brewing_set.all %}
          <tr>
            <td>{{ brewing.date }}</td>
            <td>{{ brewing.temperature }}Â°F</td>
            <td>{{ brewing.steeping_time }}</td>
            <td>{{ brewing.amount }}g</td>
            <td>{{ brewing.water_amount }}ml</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <br>
    <br>
    <br>
    <br>
    <h3>Add a new brewing session</h3>
    <form method="post" class="subsection-content" autocomplete="off">
      {% csrf_token %}
      {{ brewing_form.as_p }}
      <button type="submit" class="btn submit">Add Brewing Session</button>
    </form>
  </section>
</div>
{% endblock %}